# 08|栈：如何实现浏览器的前进和后退功能？

## 什么是栈

- 后进者先出，先进者后出。
- 栈是一种“操作受限”的线性表，只允许一段插入和删除数据。
- 数组和链表可以替代栈，但是暴露了太多的接口，容易不可控。
- 当某个数据集合只涉及在一段插入和删除数据，并且满足后进先出、先进后出的特性，我们就应该首选“栈”这种数据结构。

## 如何实现栈

- 用数组实现的栈，我们叫做顺序栈。用链表实现的栈，我们叫做链式栈。
- 入栈、出栈的时间复杂度都是O(1)
- 动态扩容的顺序栈：入栈、出栈的时间复杂度也是O(1)（通过摊还分析法分析得到）

## 栈的应用：

- 函数调用栈：函数栈帧，通过栈来保存临时变量
- 表达式求值：两个栈实现，一个操作数的栈，一个运算符的栈。如果遇到数直接入栈。如果遇到运算符，和栈顶元素比较，如果比栈顶运算符的优先级高，则符号入栈；如果比栈顶运算符的优先级相同或者低，就拿出两个数进行运算；然后继续比较。
- 括号匹配：左括号入栈，右括号出栈，最后看栈是否为空
- 浏览器的前进和后退：两个栈实现，一个栈保存浏览记录，一个栈保存后退的记录，如果跳转新的后退记录的栈清空。

## 课后思考：

### 1、为什么函数调用要用“栈”来保存临时变量？其他数据结构不行吗？

- 并不是一定要用栈来保存临时变量，只不过函数调用符合后进先出的特性，用栈来实现顺理成章。
- 从调用函数进入被调用函数，对于数据来说，变化的是作用域。在进入被调用函数的时候，分配一段栈空间给这个函数的变量，在函数结束的时候，将栈顶复位，正好回到调用函数的作用域内。

### 2、JVM内存管理中有个“堆栈”的概念？

- 内存中的堆栈和数据结构堆栈不是一个概念，可以说内存中的堆栈是真实存在的物理区，数据结构中的堆栈是抽象的数据存储结构。
- 内存空间在逻辑上分为三部分：代码区、静态数据区和动态数据区，动态数据区有分为栈区和堆区。
- 代码区：存储方法体的二进制代码。高级调度（作业调度）、中级调度（内存调度）、低级调度（进程调度）控制代码区执行代码的切换。
- 静态区：存储全局变量、静态变量、常量，常量包含final修饰的常量和String常量。系统自动分配和回收。
- 栈区：存储运行方法的形参、局部变量、返回值。由系统自动分配和回收。
- 堆区：new一个对象的引用或地址存储在栈区，指向该对象存储在堆区中的真实数据。

